#stn_pp$EL PINTOR
#colnames(stn_pp)[2]
stn_pp$"EL PINTOR"
#stn_pp$EL PINTOR
#colnames(stn_pp)[2]
#stn_pp$"EL PINTOR"
stn_pp[2]
plot(stn_pp)
plot(stn_pp[2])
idx <- as.Date(stn_pp[,1])
as.Date(stn_pp[,1])
as.Date(stn_pp[2:,1])
as.Date(stn_pp[2:31868,1])
class(stn_pp[,1])
class(stn_pp$1)
class(stn_pp$"1")
#stn_pp$EL PINTOR
colnames(stn_pp)#[2]
class(stn_pp$"...1")
idx <- as.Date(stn_pp["...1"])
idx <- as.Date(stn_pp$"...1")
# class(stn_pp$"...1")
idx <- as.Date(stn_pp$"...1")
# class(stn_pp$"...1")
idx <- as.Date(stn_pp$"...1")
data.matrix <- stn_pp[,-1]
data.xts <- xts(data.matrix, order.by = idx )
library(xts)
data.xts <- xts(data.matrix, order.by = idx )
str(data.xts)
plot(data.xts)
data.zoo <- as.zoo(data.xts)
str(data.zoo)
plot(data.zoo, main = "Series de tiempo de precipitación")
plot(data.xts[1])
plot(data.zoo[1], main = "Series de tiempo de precipitación")
plot(data.xts[,1])
plot(data.xts[,2])
plot(data.xts[,1])
plot(data.zoo[,1], main = "Series de tiempo de precipitación")
data.matrix <- stn_pp[1,-1]
data.matrix
data.matrix <- stn_pp[,-1]
data.matrix
data.matrix <- stn_pp[,-1][1]
data.matrix
data.matrix <- stn_pp[,-1][1,8,39]
data.matrix
data.matrix <- stn_pp[,-1][[1,8]]
data.matrix
data.matrix <- stn_pp[,-1][1]
data.matrix
data.matrix <- stn_pp[,-1][c(1,8)]
data.matrix
stn_pp$N
stn_pp$"N"
stn_pp["N"]
stn_metadata["N"]
as.vector(stn_metadata["N"])
vec_N <- as.vector(stn_metadata["N"])
vec_N
vec_N <- stn_metadata.pull("N")
vec_N
vec_N <- stn_metadata %>% pull("N")
vec_N
class(vec_N)
data.matrix <- stn_pp[,-1][vec_N]#[c(1,8)]
data.matrix
data.xts <- xts(data.matrix, order.by = idx )
str(data.xts)
plot(data.xts[,1])
data.xts
dim(data.xts)
plot(data.xts)
str(data.zoo)
plot(data.zoo, main = "Series de tiempo de precipitación")
data.zoo <- as.zoo(data.xts)
str(data.zoo)
plot(data.zoo, main = "Series de tiempo de precipitación")
library(lattice, lib.loc = "/usr/lib/R/library")
xyplot(data.xts,xlab = "Fecha",ylab = "Precipitación [mm/dia]",
ylim=c(0,100))
str(stn_pp)
stn_pp <- read_excel("base_estaciones/ACTUALIZANDO_pp_estaciones_Peru.xlsx", sheet = "pp_estaciones_Peru", skip=1, col_names = TRUE, col_types= c("date",rep("numeric",87)))
stn_pp
str(stn_pp)
vec_N <- stn_metadata %>% pull("N")
vec_N
class(vec_N)
# class(stn_pp$"...1")
idx <- as.Date(stn_pp$"...1")
data.matrix <- stn_pp[,-1]
data.matrix <- stn_pp[,-1]
data.xts <- xts(data.matrix, order.by = idx )
str(data.xts)
data.matrix <- stn_pp[,-1][vec_N]#[c(1,8)]
data.matrix
# data.matrix
data.xts <- xts(data.matrix, order.by = idx )
str(data.xts)
plot(data.xts)
data.zoo <- as.zoo(data.xts)
str(data.zoo)
plot(data.zoo, main = "Series de tiempo de precipitación")
xyplot(data.xts,xlab = "Fecha",ylab = "Precipitación [mm/dia]",
ylim=c(0,100))
data.xts
data.xts[,1]
xyplot(data.xts[,1],xlab = "Fecha",ylab = "Precipitación [mm/dia]",
ylim=c(0,100))
data.xts["EL PINTOR"]
data.xts
vec_N
stn_metadata
stn_metadata$Estaciones
stn_metadata$Estaciones=="EL PINTOR"
(stn_metadata$Estaciones=="EL PINTOR")==TRUE
which.max(stn_metadata$Estaciones=="EL PINTOR")
plot_ly(data.xts[,1] , type= 'scatter', mode='lines', name= 'T max')
# xyplot(data.xts[,1],xlab = "Fecha",ylab = "Precipitación [mm/dia]",ylim=c(0,100))
plot_ly(as.DataFrame(data.xts[,1]) , type= 'scatter', mode='lines', name= 'T max')
# xyplot(data.xts[,1],xlab = "Fecha",ylab = "Precipitación [mm/dia]",ylim=c(0,100))
#plot_ly(as.DataFrame(data.xts[,1]) , type= 'scatter', mode='lines', name= 'T max')
plot(data.xts[,1])
runApp('proyecto.R')
View(stn_metadata)
runApp('proyecto.R')
runApp('OpenCloud-master')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
View(stn_ls)
rm(stn_ls)
runApp('proyecto.R')
stn_metadata$Estaciones
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
stn_ls <- list("EL PINTOR", "CUTERVO", "HUANUCO", "TINGO MARIA", "SAN RAMON", "JEPELACIO", "SORITOR", "NUEVO LIMA", "ALAO", "SAPOSOA", "LAMAS", "TABALOSOS", "PICOTA", "NARANJILLO", "CHAZUTA", "PUCALLPA - HUIMBAYOC", "EL PORVENIR", "SAUCE", "MOYOBAMBA", "JAMALCA")
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
source('helper.R')
getwd()
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('OpenCloud-master')
runApp('/media/manu/Manu/Meteomanu/R-Ladies_Shiny/proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
library(readxl)
stn_metadata <- read_excel("base_estaciones/ACTUALIZANDO_pp_estaciones_Peru.xlsx", sheet = "Metadata_solo_Maranon")
stn_metadata # %>% select(-N)
stn_metadata
stn_id <- which.max(stn_metadata$Estaciones=="EL PINTOR")
stn_id
stn_metadata[1,]
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
leaflet() %>%
addTiles() %>%
# addRasterImage(IR04, colors = pal,
#                opacity=0.2) %>%
# addLegend(pal= pal, values= values(IR04),
#           title='IR4') %>%
## marker en un punto
# addMarkers(
#     lng= c(-71), lat= c(-12),
#     icon = NULL,
#         # list(
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-circle-icon-23.png",  # circulo gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-square-frame-23.png", # cuadrado gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/red-triangle-png-20.png",     # triangulo rojo
#         #        iconUrl = 'http://icons.iconarchive.com/icons/artua/star-wars/128/Master-Joda-icon.png',
#         #        iconSize = c(75,75)
#         #    ),
#     popup = c("RStudio @ CiudadX")
# ) %>%
stn_id <- which.max(stn_metadata$Estaciones==input$stn)
leaflet() %>%
addTiles()
leaflet() %>%
addTiles() %>%
# addRasterImage(IR04, colors = pal,
#                opacity=0.2) %>%
# addLegend(pal= pal, values= values(IR04),
#           title='IR4') %>%
## marker en un punto
# addMarkers(
#     lng= c(-71), lat= c(-12),
#     icon = NULL,
#         # list(
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-circle-icon-23.png",  # circulo gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-square-frame-23.png", # cuadrado gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/red-triangle-png-20.png",     # triangulo rojo
#         #        iconUrl = 'http://icons.iconarchive.com/icons/artua/star-wars/128/Master-Joda-icon.png',
#         #        iconSize = c(75,75)
#         #    ),
#     popup = c("RStudio @ CiudadX")
# ) %>%
stn_id <- which.max(stn_metadata$Estaciones=="EL PINTOR")
stn_id <- which.max(stn_metadata$Estaciones=="EL PINTOR")
leaflet() %>%
addTiles() %>%
# addRasterImage(IR04, colors = pal,
#                opacity=0.2) %>%
# addLegend(pal= pal, values= values(IR04),
#           title='IR4') %>%
## marker en un punto
# addMarkers(
#     lng= c(-71), lat= c(-12),
#     icon = NULL,
#         # list(
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-circle-icon-23.png",  # circulo gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-square-frame-23.png", # cuadrado gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/red-triangle-png-20.png",     # triangulo rojo
#         #        iconUrl = 'http://icons.iconarchive.com/icons/artua/star-wars/128/Master-Joda-icon.png',
#         #        iconSize = c(75,75)
#         #    ),
#     popup = c("RStudio @ CiudadX")
# ) %>%
addMarkers(data = stn_metadata[stn_id, ],
lng = ~ Longitud, lat = ~ Latitud
# icon = list(
#                iconUrl = 'http://icons.iconarchive.com/icons/artua/star-wars/128/Master-Joda-icon.png',
#                iconSize = c(75, 75)
#            )
) %>%
addCircles(data = stn_metadata, lat = ~ Latitud, lng = ~ Longitud) %>%
#addPopups(-93.65, 42.0285, "Here is the <b>Department of Statistics</b>, ISU") %>%
addCircleMarkers(rand_lng(50), rand_lat(50), color = "#ff0000")
stn_id <- which.max(stn_metadata$Estaciones=="EL PINTOR")
leaflet() %>%
addTiles() %>%
# addRasterImage(IR04, colors = pal,
#                opacity=0.2) %>%
# addLegend(pal= pal, values= values(IR04),
#           title='IR4') %>%
## marker en un punto
# addMarkers(
#     lng= c(-71), lat= c(-12),
#     icon = NULL,
#         # list(
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-circle-icon-23.png",  # circulo gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-square-frame-23.png", # cuadrado gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/red-triangle-png-20.png",     # triangulo rojo
#         #        iconUrl = 'http://icons.iconarchive.com/icons/artua/star-wars/128/Master-Joda-icon.png',
#         #        iconSize = c(75,75)
#         #    ),
#     popup = c("RStudio @ CiudadX")
# ) %>%
addMarkers(data = stn_metadata[stn_id, ],
lng = ~ Longitud, lat = ~ Latitud
# icon = list(
#                iconUrl = 'http://icons.iconarchive.com/icons/artua/star-wars/128/Master-Joda-icon.png',
#                iconSize = c(75, 75)
#            )
) %>%
addCircles(data = stn_metadata, lat = ~ Latitud, lng = ~ Longitud) %>%
#addPopups(-93.65, 42.0285, "Here is the <b>Department of Statistics</b>, ISU") %>%
#addCircleMarkers(rand_lng(50), rand_lat(50), color = "#ff0000")
stn_id <- which.max(stn_metadata$Estaciones=="EL PINTOR")
leaflet() %>%
addTiles() %>%
# addRasterImage(IR04, colors = pal,
#                opacity=0.2) %>%
# addLegend(pal= pal, values= values(IR04),
#           title='IR4') %>%
## marker en un punto
# addMarkers(
#     lng= c(-71), lat= c(-12),
#     icon = NULL,
#         # list(
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-circle-icon-23.png",  # circulo gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-square-frame-23.png", # cuadrado gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/red-triangle-png-20.png",     # triangulo rojo
#         #        iconUrl = 'http://icons.iconarchive.com/icons/artua/star-wars/128/Master-Joda-icon.png',
#         #        iconSize = c(75,75)
#         #    ),
#     popup = c("RStudio @ CiudadX")
# ) %>%
addMarkers(data = stn_metadata[stn_id, ],
lng = ~ Longitud, lat = ~ Latitud
# icon = list(
#                iconUrl = 'http://icons.iconarchive.com/icons/artua/star-wars/128/Master-Joda-icon.png',
#                iconSize = c(75, 75)
#            )
) %>%
addCircles(data = stn_metadata, lat = ~ Latitud, lng = ~ Longitud) #%>%
#addPopups(-93.65, 42.0285, "Here is the <b>Department of Statistics</b>, ISU") %>%
#addCircleMarkers(rand_lng(50), rand_lat(50), color = "#ff0000")
stn_id <- which.max(stn_metadata$Estaciones=="EL PINTOR")
leaflet() %>%
addTiles() %>%
# addRasterImage(IR04, colors = pal,
#                opacity=0.2) %>%
# addLegend(pal= pal, values= values(IR04),
#           title='IR4') %>%
## marker en un punto
# addMarkers(
#     lng= c(-71), lat= c(-12),
#     icon = NULL,
#         # list(
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-circle-icon-23.png",  # circulo gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-square-frame-23.png", # cuadrado gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/red-triangle-png-20.png",     # triangulo rojo
#         #        iconUrl = 'http://icons.iconarchive.com/icons/artua/star-wars/128/Master-Joda-icon.png',
#         #        iconSize = c(75,75)
#         #    ),
#     popup = c("RStudio @ CiudadX")
# ) %>%
addMarkers(data = stn_metadata[stn_id, ],
lng = ~ Longitud, lat = ~ Latitud
# icon = list(
#                iconUrl = 'http://icons.iconarchive.com/icons/artua/star-wars/128/Master-Joda-icon.png',
#                iconSize = c(75, 75)
#            )
) %>%
addCircles(data = stn_metadata[stn_id, ], lat = ~ Latitud, lng = ~ Longitud) #%>%
#addPopups(-93.65, 42.0285, "Here is the <b>Department of Statistics</b>, ISU") %>%
#addCircleMarkers(rand_lng(50), rand_lat(50), color = "#ff0000")
stn_id <- which.max(stn_metadata$Estaciones=="EL PINTOR")
leaflet() %>%
addTiles() %>%
# addRasterImage(IR04, colors = pal,
#                opacity=0.2) %>%
# addLegend(pal= pal, values= values(IR04),
#           title='IR4') %>%
## marker en un punto
# addMarkers(
#     lng= c(-71), lat= c(-12),
#     icon = NULL,
#         # list(
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-circle-icon-23.png",  # circulo gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-square-frame-23.png", # cuadrado gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/red-triangle-png-20.png",     # triangulo rojo
#         #        iconUrl = 'http://icons.iconarchive.com/icons/artua/star-wars/128/Master-Joda-icon.png',
#         #        iconSize = c(75,75)
#         #    ),
#     popup = c("RStudio @ CiudadX")
# ) %>%
# addMarkers(data = stn_metadata[stn_id, ],
#            lng = ~ Longitud, lat = ~ Latitud
#            # icon = list(
#            #                iconUrl = 'http://icons.iconarchive.com/icons/artua/star-wars/128/Master-Joda-icon.png',
#            #                iconSize = c(75, 75)
#            #            )
# ) %>%
addCircles(data = stn_metadata[stn_id, ], lat = ~ Latitud, lng = ~ Longitud) #%>%
#addPopups(-93.65, 42.0285, "Here is the <b>Department of Statistics</b>, ISU") %>%
#addCircleMarkers(rand_lng(50), rand_lat(50), color = "#ff0000")
stn_id <- which.max(stn_metadata$Estaciones=="EL PINTOR")
leaflet() %>%
addTiles() %>%
# addRasterImage(IR04, colors = pal,
#                opacity=0.2) %>%
# addLegend(pal= pal, values= values(IR04),
#           title='IR4') %>%
## marker en un punto
# addMarkers(
#     lng= c(-71), lat= c(-12),
#     icon = NULL,
#         # list(
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-circle-icon-23.png",  # circulo gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/black-square-frame-23.png", # cuadrado gris
#         #        iconUrl = "https://www.freeiconspng.com/uploads/red-triangle-png-20.png",     # triangulo rojo
#         #        iconUrl = 'http://icons.iconarchive.com/icons/artua/star-wars/128/Master-Joda-icon.png',
#         #        iconSize = c(75,75)
#         #    ),
#     popup = c("RStudio @ CiudadX")
# ) %>%
# addMarkers(data = stn_metadata[stn_id, ],
#            lng = ~ Longitud, lat = ~ Latitud
#            # icon = list(
#            #                iconUrl = 'http://icons.iconarchive.com/icons/artua/star-wars/128/Master-Joda-icon.png',
#            #                iconSize = c(75, 75)
#            #            )
# ) %>%
addCircles(data = stn_metadata[stn_id, ], lat = ~ Latitud, lng = ~ Longitud, color='red') #%>%
#addPopups(-93.65, 42.0285, "Here is the <b>Department of Statistics</b>, ISU") %>%
#addCircleMarkers(rand_lng(50), rand_lat(50), color = "#ff0000")
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
library(shiny); runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
library(readxl)
stn_metadata <- read_excel("base_estaciones/ACTUALIZANDO_pp_estaciones_Peru.xlsx", sheet = "Metadata_solo_Maranon")
stn_metadata # %>% select(-N)
stn_pp <- read_excel("base_estaciones/ACTUALIZANDO_pp_estaciones_Peru.xlsx", sheet = "pp_estaciones_Peru", skip=1, col_names = TRUE, col_types= c("date",rep("numeric",87)))
stn_pp
vec_N <- stn_metadata %>% pull("N")
vec_N
class(vec_N)
# class(stn_pp$"...1")
idx <- as.Date(stn_pp$"...1")
# data.matrix <- stn_pp[,-1]
data.matrix <- stn_pp[,-1][vec_N]#[c(1,8)]
data.matrix
data.xts <- xts(data.matrix, order.by = idx )
str(data.xts)
data.zoo <- as.zoo(data.xts)
str(data.zoo)
install.packages("dygraph")
str(data.zoo)
# str(data.zoo)
str(data.xts)
# str(data.zoo)
str(data.xts)
datos_stn <- data.xts[,1]
datos_stn
str(datos_stn)
# Analisis exploratorio con hydroTSM
library(hydroTSM)
hydroplot(as.zoo(data.xts[,1]), var.type="Precipitation", pfreq = "dma", ylab = "Prec")
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
library(shiny); runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
getwd()
runApp('proyecto.R')
list.files(paste0(ruta_repo, '/OpenCloud-master/www/G16/')
)
ruta_repo <- "C:/Users/Usuario/Documents/GitHub/App_UNALM"
list.files(paste0(ruta_repo, '/OpenCloud-master/www/G16/')
)
paste0(ruta_repo,'/OpenCloud-master/www/G16/', link)
paste0(ruta_repo,'/OpenCloud-master/www/G16/', 'x')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
runApp('proyecto.R')
library(shiny); runApp('proyecto.R')
## Leer puntos de estaciones de datos PISCO de prec a partir de
# puntos de estaciones que estan almacenados en un archivo *.csv
# Autores: Adrian Huerta & Waldo Lavado
#Esta es la ruta de la carpeta donde esta Pisco
# y deben estar el archivo *.csv con los puntos a extraer
# ojo que es / no \
# Descargar datos PISCO de:
#https://iridl.ldeo.columbia.edu/SOURCES/.SENAMHI/.HSR/.PISCO/index.html?Set-Language=es
# Este ejemplo es para los datos mensuales PISCOpm.nc
rm(list = ls())#borramos todos los objetos en Environment
##Leemos por poligonos
rm(list=ls())
cwd <- getwd()
# a<-("G:\\Mi unidad\\Curso Metodos Estadisticos\\2_PISCO\\Lee_PISCO")# Carpeta de trabajo
ruta_data <- paste0(cwd, "/R_prac")
# b<-"G:\\Mi unidad\\Curso Metodos Estadisticos\\2_PISCO\\Leer_Pisco_area"
# #install.packages("ncdf4")
# #install.packages("raster")
# #install.packages("rgdal")
library(ncdf4)
library(raster)
library(rgdal)
# Extraer los valores prec. promedio areal para el Mantaro
###Leemos el shape de mantaro
cuenca.wgs <- readOGR(dsn=ruta_data, layer="mantaro")
pp.cuenca.mensual <- extract(Pisco.prec.brick, cuenca.wgs, fun=mean)
plot(pp.cuenca.mensual[1,], type="l", col="blue", ylim=c(0,250), ylab="Prec. [mm]",
xlab = "Meses", main="Prec. prom areal - MANTARO [mm]")
#leemos el netcdf
Pisco.prec.brick <- brick(paste0(ruta_data,"/PISCOpm2_1.nc"))# leer netcdf con brick
#Pisco.prec.brick # Enero de 1981 hasta dic 2016
nlayers(Pisco.prec.brick)
pp.cuenca.mensual <- extract(Pisco.prec.brick, cuenca.wgs, fun=mean)
row.names(pp.cuenca.mensual) <- cuenca.wgs@data$NOMB_UH_N4 # CAMPO
# cuenca.wgs@data$ORDEN
#View(pp.cuenca.mensual)
range(pp.cuenca.mensual)
plot(pp.cuenca.mensual[1,], type="l", col="blue", ylim=c(0,250), ylab="Prec. [mm]",
xlab = "Meses", main="Prec. prom areal - MANTARO [mm]")
pp.cuenca.mensual[1,]
pp.cuenca.mensual
#pp.cuenca.mensual
write.csv(pp.cuenca.mensual[1,], "data_mantaro.csv", quote = F)
library(leaflet)
library(shiny); runApp('proyecto.R')
